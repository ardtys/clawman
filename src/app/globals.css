@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Fira+Code:wght@400;500;600;700&display=swap');
@import "tailwindcss";

:root {
  --neon-green: #39ff14;
  --neon-pink: #ff6ec7;
  --neon-cyan: #00fff7;
  --neon-yellow: #ffd700;
  --neon-orange: #ff6600;
  --crt-black: #0a0a0a;
  --crt-dark: #111111;
  --scanline-opacity: 0.08;

  /* Theme colors (defaults to green phosphor) */
  --theme-primary: #39ff14;
  --theme-secondary: #00fff7;
  --theme-accent: #ffd700;
  --theme-wall: #00fff7;
}

/* Theme: Amber Phosphor */
[data-theme="amber"] {
  --theme-primary: #ffb000;
  --theme-secondary: #ff8c00;
  --theme-accent: #ffd700;
  --theme-wall: #ff6600;
  --neon-green: #ffb000;
  --neon-cyan: #ff8c00;
}

/* Theme: Blue Phosphor */
[data-theme="blue"] {
  --theme-primary: #00bfff;
  --theme-secondary: #0080ff;
  --theme-accent: #87ceeb;
  --theme-wall: #0060ff;
  --neon-green: #00bfff;
  --neon-cyan: #0080ff;
}

/* Theme: Neon Cyberpunk */
[data-theme="neon"] {
  --theme-primary: #ff00ff;
  --theme-secondary: #00ffff;
  --theme-accent: #ffff00;
  --theme-wall: #ff00ff;
  --neon-green: #ff00ff;
  --neon-cyan: #00ffff;
}

/* Theme: Retro Arcade */
[data-theme="retro"] {
  --theme-primary: #ff6600;
  --theme-secondary: #ffcc00;
  --theme-accent: #ff0066;
  --theme-wall: #ff6600;
  --neon-green: #ff6600;
  --neon-cyan: #ffcc00;
}

/* Theme: Dark Mode */
[data-theme="dark"] {
  --theme-primary: #ffffff;
  --theme-secondary: #888888;
  --theme-accent: #ff4444;
  --theme-wall: #666666;
  --neon-green: #ffffff;
  --neon-cyan: #888888;
}

/* Theme: Matrix */
[data-theme="matrix"] {
  --theme-primary: #00ff00;
  --theme-secondary: #00cc00;
  --theme-accent: #00ff88;
  --theme-wall: #00ff00;
  --neon-green: #00ff00;
  --neon-cyan: #00cc00;
}

/* Theme: Sunset */
[data-theme="sunset"] {
  --theme-primary: #ff6688;
  --theme-secondary: #ffaa44;
  --theme-accent: #aa44ff;
  --theme-wall: #ff6688;
  --neon-green: #ff6688;
  --neon-cyan: #ffaa44;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Press Start 2P', monospace;
  background: var(--crt-black);
  color: var(--neon-green);
  overflow-x: hidden;
  min-height: 100vh;
}

/* CRT Scanline Effect */
.crt-overlay {
  pointer-events: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9999;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, var(--scanline-opacity)) 0px,
    rgba(0, 0, 0, var(--scanline-opacity)) 1px,
    transparent 1px,
    transparent 3px
  );
}

/* CRT Flicker Animation */
.crt-flicker {
  animation: crt-flicker 0.15s infinite;
}

@keyframes crt-flicker {
  0% { opacity: 0.97; }
  5% { opacity: 0.95; }
  10% { opacity: 0.98; }
  15% { opacity: 0.96; }
  20% { opacity: 0.99; }
  50% { opacity: 0.97; }
  80% { opacity: 0.98; }
  90% { opacity: 0.96; }
  100% { opacity: 0.98; }
}

/* CRT Screen Curvature */
.crt-screen {
  border-radius: 20px;
  box-shadow:
    inset 0 0 100px rgba(0, 255, 0, 0.05),
    0 0 20px rgba(0, 255, 0, 0.1),
    0 0 60px rgba(0, 255, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.crt-screen::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(
    ellipse at center,
    transparent 60%,
    rgba(0, 0, 0, 0.4) 100%
  );
  pointer-events: none;
  z-index: 10;
}

/* Neon Glow Effects */
.neon-text-green {
  color: var(--neon-green);
  text-shadow:
    0 0 7px var(--neon-green),
    0 0 10px var(--neon-green),
    0 0 21px var(--neon-green),
    0 0 42px #0fa;
}

.neon-text-pink {
  color: var(--neon-pink);
  text-shadow:
    0 0 7px var(--neon-pink),
    0 0 10px var(--neon-pink),
    0 0 21px var(--neon-pink),
    0 0 42px #ff6ec7;
}

.neon-text-cyan {
  color: var(--neon-cyan);
  text-shadow:
    0 0 7px var(--neon-cyan),
    0 0 10px var(--neon-cyan),
    0 0 21px var(--neon-cyan),
    0 0 42px #00fff7;
}

.neon-text-yellow {
  color: var(--neon-yellow);
  text-shadow:
    0 0 7px var(--neon-yellow),
    0 0 10px var(--neon-yellow),
    0 0 21px var(--neon-yellow);
}

.neon-border {
  border: 2px solid var(--neon-green);
  box-shadow:
    0 0 5px var(--neon-green),
    inset 0 0 5px rgba(57, 255, 20, 0.1);
}

.neon-border-pink {
  border: 2px solid var(--neon-pink);
  box-shadow:
    0 0 5px var(--neon-pink),
    inset 0 0 5px rgba(255, 110, 199, 0.1);
}

.neon-border-cyan {
  border: 2px solid var(--neon-cyan);
  box-shadow:
    0 0 5px var(--neon-cyan),
    inset 0 0 5px rgba(0, 255, 247, 0.1);
}

/* Terminal Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: var(--crt-dark);
}

::-webkit-scrollbar-thumb {
  background: var(--neon-green);
  border-radius: 3px;
  box-shadow: 0 0 5px var(--neon-green);
}

/* Arcade Button Style */
.arcade-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: 10px;
  padding: 8px 16px;
  background: transparent;
  border: 2px solid var(--neon-cyan);
  color: var(--neon-cyan);
  cursor: pointer;
  text-transform: uppercase;
  transition: all 0.2s;
  box-shadow: 0 0 5px rgba(0, 255, 247, 0.3);
}

.arcade-btn:hover {
  background: rgba(0, 255, 247, 0.1);
  box-shadow:
    0 0 10px var(--neon-cyan),
    0 0 20px rgba(0, 255, 247, 0.3);
  transform: scale(1.05);
}

.arcade-btn:active {
  transform: scale(0.95);
}

.arcade-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

/* Pixel border */
.pixel-border {
  border: 4px solid;
  border-image: repeating-linear-gradient(
    90deg,
    var(--neon-green) 0px,
    var(--neon-green) 4px,
    transparent 4px,
    transparent 8px
  ) 4;
}

/* Crab Rain Animation */
@keyframes crab-fall {
  0% {
    transform: translateY(-100px) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(110vh) rotate(720deg);
    opacity: 0.3;
  }
}

.crab-rain {
  animation: crab-fall linear forwards;
  position: fixed;
  pointer-events: auto;
  cursor: pointer;
  z-index: 1000;
  font-size: 24px;
  user-select: none;
}

.crab-rain:hover {
  transform: scale(1.5);
}

/* Blinking cursor */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.cursor-blink {
  animation: blink 1s step-end infinite;
}

/* Power-on effect */
@keyframes power-on {
  0% {
    transform: scaleY(0.01) scaleX(0.5);
    filter: brightness(10);
  }
  20% {
    transform: scaleY(0.01) scaleX(1);
    filter: brightness(5);
  }
  40% {
    transform: scaleY(1) scaleX(1);
    filter: brightness(2);
  }
  100% {
    transform: scaleY(1) scaleX(1);
    filter: brightness(1);
  }
}

.power-on {
  animation: power-on 0.8s ease-out forwards;
}

/* Maze wall glow */
.maze-glow {
  filter: drop-shadow(0 0 2px var(--neon-cyan)) drop-shadow(0 0 4px rgba(0, 255, 247, 0.5));
}

/* Achievement popup shimmer */
@keyframes achievement-shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.achievement-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  background-size: 200% 100%;
  animation: achievement-shimmer 2s linear infinite;
}

/* Mobile: prevent double-tap zoom and unwanted selection */
@media (max-width: 1023px) {
  html {
    touch-action: manipulation;
  }

  canvas {
    touch-action: none;
    max-width: 100% !important;
  }
}

/* ========== LANDING PAGE STYLES ========== */

/* Glitch text effect */
@keyframes glitch {
  0% { text-shadow: 2px 0 #00ffff, -2px 0 #ffff00; }
  20% { text-shadow: -2px 0 #00ffff, 2px 0 #ffff00; }
  40% { text-shadow: 2px -2px #00ffff, -2px 2px #ffff00; }
  60% { text-shadow: -1px 2px #00ffff, 1px -2px #ffff00; }
  80% { text-shadow: 2px 0 #00ffff, -2px 0 #ffff00; }
  100% { text-shadow: -2px 0 #00ffff, 2px 0 #ffff00; }
}

.glitch-text {
  animation: glitch 3s infinite;
}

/* Scanline scroll overlay for sections */
@keyframes scanline-scroll {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

.scanline-scroll::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: rgba(0, 255, 255, 0.06);
  animation: scanline-scroll 4s linear infinite;
  pointer-events: none;
  z-index: 10;
}

/* Terminal cursor */
@keyframes terminal-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.terminal-cursor::after {
  content: '_';
  animation: terminal-blink 0.8s step-end infinite;
  color: #00ffff;
}

/* Flicker for eerie vibe */
@keyframes eerie-flicker {
  0% { opacity: 1; }
  3% { opacity: 0.4; }
  6% { opacity: 1; }
  7% { opacity: 0.6; }
  9% { opacity: 1; }
  50% { opacity: 1; }
  51% { opacity: 0.8; }
  52% { opacity: 1; }
  90% { opacity: 1; }
  92% { opacity: 0.5; }
  93% { opacity: 1; }
}

.eerie-flicker {
  animation: eerie-flicker 5s infinite;
}

/* Maze cell pulse */
@keyframes cell-pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* Grid noise background */
.noise-bg {
  background-image:
    radial-gradient(circle at 25% 25%, rgba(0, 255, 255, 0.015) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(255, 255, 0, 0.015) 0%, transparent 50%);
}

/* Data stream gradient */
@keyframes data-stream {
  0% { background-position: 0% 0%; }
  100% { background-position: 0% 100%; }
}

.data-stream-bg {
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    rgba(0, 255, 255, 0.02) 2px,
    transparent 4px
  );
  background-size: 100% 8px;
  animation: data-stream 2s linear infinite;
}

/* ========== CRT PANEL STYLES ========== */
.crt-panel {
  background: rgba(10, 10, 10, 0.95);
  border: 1px solid var(--neon-cyan);
  box-shadow: 0 0 10px rgba(0, 255, 247, 0.2), inset 0 0 20px rgba(0, 0, 0, 0.5);
}

/* ========== POWER-UP STYLES ========== */
.power-up-speed { color: #ffff00; text-shadow: 0 0 10px #ffff00; }
.power-up-shield { color: #00ffff; text-shadow: 0 0 10px #00ffff; }
.power-up-magnet { color: #ff00ff; text-shadow: 0 0 10px #ff00ff; }
.power-up-freeze { color: #88ddff; text-shadow: 0 0 10px #88ddff; }

@keyframes power-up-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.1); opacity: 0.8; }
}

.power-up-active {
  animation: power-up-pulse 0.5s ease-in-out infinite;
}

/* ========== ENHANCED MOBILE STYLES ========== */
@media (max-width: 767px) {
  /* Smaller fonts on mobile */
  body {
    font-size: 12px;
  }

  /* Full-width game canvas */
  .game-container {
    width: 100vw !important;
    overflow: hidden;
  }

  /* Larger touch targets */
  button, .arcade-btn {
    min-height: 44px;
    min-width: 44px;
  }

  /* Simplified panels on mobile */
  .crt-panel {
    padding: 0.5rem;
  }

  /* Stack elements vertically */
  .mobile-stack {
    flex-direction: column !important;
  }

  /* Hide non-essential elements */
  .hide-mobile {
    display: none !important;
  }
}

@media (max-width: 480px) {
  /* Extra small screens */
  .game-canvas-container {
    transform: scale(0.85);
    transform-origin: top center;
  }

  /* Even larger touch targets */
  button, .arcade-btn {
    min-height: 48px;
    padding: 12px 16px;
  }
}

/* ========== ACCESSIBILITY STYLES ========== */
/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .crt-flicker, .glitch-text, .eerie-flicker {
    animation: none !important;
  }
}

/* High contrast mode */
.high-contrast {
  filter: contrast(1.3);
}

.high-contrast * {
  border-width: 2px !important;
}

/* Focus indicators for keyboard navigation */
*:focus-visible {
  outline: 3px solid var(--neon-cyan);
  outline-offset: 2px;
}

/* Screen reader only text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ========== GAME MODE INDICATORS ========== */
.mode-classic { border-color: var(--neon-green); }
.mode-endless { border-color: #ff6600; }
.mode-timeattack { border-color: #ff0000; }
.mode-coop { border-color: #00ff00; }

/* Timer warning animation */
@keyframes timer-warning {
  0%, 100% { color: #ff6600; }
  50% { color: #ff0000; }
}

.timer-warning {
  animation: timer-warning 0.5s ease-in-out infinite;
}

/* ========== SPECIAL GHOST EFFECTS ========== */
.ghost-teleporter {
  filter: drop-shadow(0 0 8px #9900ff);
}

.ghost-splitter {
  filter: drop-shadow(0 0 8px #00ff99);
}

@keyframes ghost-teleport {
  0% { opacity: 1; transform: scale(1); }
  50% { opacity: 0; transform: scale(0.5); }
  100% { opacity: 1; transform: scale(1); }
}

.ghost-teleporting {
  animation: ghost-teleport 0.3s ease-in-out;
}

/* ========== PLAYER 2 STYLES ========== */
.player2-indicator {
  color: #00ffff;
  text-shadow: 0 0 10px #00ffff;
}

/* ========== LEADERBOARD STYLES ========== */
.leaderboard-gold { color: #ffd700; text-shadow: 0 0 5px #ffd700; }
.leaderboard-silver { color: #c0c0c0; text-shadow: 0 0 5px #c0c0c0; }
.leaderboard-bronze { color: #cd7f32; text-shadow: 0 0 5px #cd7f32; }
